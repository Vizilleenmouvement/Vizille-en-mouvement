<!DOCTYPE html>
<html lang="fr">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'Ã‰quipe â€“ Vizille en Mouvement</title>
    <meta name="description" content="DÃ©couvrez l'Ã©quipe de Vizille en Mouvement. Des femmes et des hommes engagÃ©s pour Vizille.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vizilleenmouvement.fr/equipe.html">
    <meta property="og:title" content="L'Ã‰quipe - Vizille en Mouvement">
    <meta property="og:description" content="DÃ©couvrez l'Ã©quipe de Vizille en Mouvement. Des femmes et des hommes engagÃ©s.">
    <meta property="og:image" content="https://vizilleenmouvement.fr/images/logo.png">
    <meta property="og:locale" content="fr_FR">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="L'Ã‰quipe - Vizille en Mouvement">
    <meta name="twitter:description" content="DÃ©couvrez l'Ã©quipe de Vizille en Mouvement.">
    <meta name="twitter:image" content="https://vizilleenmouvement.fr/images/logo.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Source+Sans+3:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/pages/equipe.css">
</head>
<body>
    <!-- Skip Link pour navigation clavier -->
    <a href="#main-content" class="skip-link">Aller au contenu principal</a>

    <header class="header">
        <div class="header-top">
            <p>L'Ã‰quipe â€¢ Vizille en Mouvement</p>
        </div>

        <div class="header-main">
            <a href="index.html">
                <img src="images/logo.png" alt="Vizille en Mouvement" class="nav-header-logo">
            </a>
            <button class="menu-toggle" aria-label="Menu">â˜°</button>
            <nav>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="bilan.html">Bilan</a></li>
                    <li><a href="projet.html">Projet</a></li>
                    <li><a href="blog.html">ActualitÃ©s</a></li>
                    <li><a href="equipe.html" class="active">Ã‰quipe</a></li>
                    <li><a href="faq.html">Construisons ensemble</a></li>
                    <li><a href="admin.html" class="admin-link" title="Administration">âš™ï¸</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <script src="js/menu-mobile.js"></script>

    <section class="hero-unified">
        <img src="images/logo.png" alt="Vizille en Mouvement" class="hero-logo">
        <div class="hero-text">
            <h1>ğŸ‘¥ L'Ã‰quipe</h1>
            <p class="slogan">Ensemble pour une ville dynamique et solidaire</p>
            <p class="hero-subtitle">Notre liste rassemble des femmes et des hommes de tous horizons, unis par l'envie de servir Vizille et ses habitants.</p>
        </div>
    </section>

    <main class="content" id="main-content">

        <!-- TOGGLE UNIQUE -->
        <div style="display: flex; justify-content: flex-end; margin-bottom: 1.5rem;">
            <div class="view-toggle" style="display: flex; gap: 0.5rem;">
                <button class="view-btn active" data-view="cards" onclick="setView('cards')" style="padding: 0.5rem 1rem; border: 2px solid var(--bleu-vizille); background: var(--bleu-vizille); color: white; border-radius: 8px; cursor: pointer; font-weight: 600;">
                    ğŸ´ Cartes
                </button>
                <button class="view-btn" data-view="list" onclick="setView('list')" style="padding: 0.5rem 1rem; border: 2px solid var(--bleu-vizille); background: white; color: var(--bleu-vizille); border-radius: 8px; cursor: pointer; font-weight: 600;">
                    ğŸ“‹ Liste
                </button>
            </div>
        </div>

        <!-- L'Ã‰QUIPE COMPLÃˆTE -->
        <h2 class="section-title">ğŸ‘¥ L'Ã©quipe</h2>
        <div id="team-grid"></div>
        
        <p id="click-hint" style="text-align: center; color: #666; font-style: italic; margin-top: 1rem; font-size: 0.9rem;">ğŸ‘† Cliquez pour mieux connaÃ®tre le candidat ou la candidate</p>

        <!-- CHARTE D'ENGAGEMENT -->
        <section class="values-section">
            <h2 class="section-title">ğŸ“œ Notre Charte d'Engagement</h2>
            <div class="values-grid">
                <div class="value-item">
                    <div class="value-icon">ğŸ‘‚</div>
                    <h4>Ã‰coute Citoyenne</h4>
                    <p>Placer la parole des habitants au cÅ“ur de la dÃ©cision</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">ğŸŒ±</div>
                    <h4>DÃ©veloppement Durable</h4>
                    <p>Agir pour une transition Ã©cologique ambitieuse</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">ğŸ¤</div>
                    <h4>Respect Mutuel</h4>
                    <p>Instaurer la confiance avec le personnel municipal</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">âš–ï¸</div>
                    <h4>Ã‰galitÃ© RÃ©elle</h4>
                    <p>Garantir l'Ã©galitÃ© femmes-hommes dans les responsabilitÃ©s</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">â¤ï¸</div>
                    <h4>DignitÃ© et TolÃ©rance</h4>
                    <p>Lutter contre toutes les discriminations</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">ğŸ›ï¸</div>
                    <h4>LaÃ¯citÃ© & NeutralitÃ©</h4>
                    <p>Respecter les principes rÃ©publicains</p>
                </div>
            </div>
        </section>

        <!-- CONTRAT D'ACTION -->
        <section class="values-section contrat-section">
            <h2 class="section-title">âœï¸ Notre Contrat d'Action</h2>
            <div class="values-grid">
                <div class="value-item">
                    <div class="value-icon">ğŸ’</div>
                    <h4>Altruisme</h4>
                    <p>Agir pour l'intÃ©rÃªt gÃ©nÃ©ral avant tout</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">ğŸ“Š</div>
                    <h4>Rigueur</h4>
                    <p>Gestion transparente et responsable des deniers publics</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">ğŸ—³ï¸</div>
                    <h4>DÃ©mocratie</h4>
                    <p>Respect de l'opinion politique de chacun</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">ğŸ—ï¸</div>
                    <h4>Participation</h4>
                    <p>Co-construction des projets avec les habitants</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">âœ¨</div>
                    <h4>ExemplaritÃ©</h4>
                    <p>Refus des attaques personnelles, dÃ©bat d'idÃ©es</p>
                </div>
            </div>
        </section>

        <!-- REJOIGNEZ-NOUS -->
        <section class="join-section">
            <h2>ğŸ¤ Rejoignez-nous</h2>
            <p>Vous souhaitez vous engager pour Vizille ?</p>
            <a href="faq.html" class="btn-contact">Nous contacter</a>
        </section>

    </main>

    <footer class="footer">
        <p class="footer-slogan">Â« Ensemble pour une ville dynamique et solidaire Â»</p>
        <p>Â© 2025 Vizille en Mouvement</p>
    </footer>

    <script>
        let candidatsData = [];
        let currentView = 'cards';

        function setView(view) {
            currentView = view;
            document.querySelectorAll('.view-btn').forEach(btn => {
                if (btn.dataset.view === view) {
                    btn.style.background = 'var(--bleu-vizille)';
                    btn.style.color = 'white';
                    btn.classList.add('active');
                } else {
                    btn.style.background = 'white';
                    btn.style.color = 'var(--bleu-vizille)';
                    btn.classList.remove('active');
                }
            });
            renderLeader();
            renderTeam();
        }

        async function loadCandidats() {
            try {
                const response = await fetch('candidats.json?v=' + Date.now());
                if (!response.ok) throw new Error('Erreur');

                candidatsData = await response.json();

                // Filtrer les actifs et trier par ordre (Catherine incluse)
                candidatsData = candidatsData
                    .filter(c => c.actif !== false)
                    .sort((a, b) => (a.ordre || 99) - (b.ordre || 99));

                // Afficher toute l'Ã©quipe
                renderTeam();
            } catch (err) {
                document.getElementById('team-grid').innerHTML = `
                    <div class="loading">
                        <span style="font-size: 2rem;">ğŸ‘¥</span>
                        <p>L'Ã©quipe sera bientÃ´t dÃ©voilÃ©e !</p>
                    </div>
                `;
            }
        }

        function renderTeam() {
            const grid = document.getElementById('team-grid');

            if (candidatsData.length === 0) {
                grid.innerHTML = `
                    <div class="loading">
                        <span style="font-size: 2rem;">ğŸ‘¥</span>
                        <p>L'Ã©quipe sera bientÃ´t dÃ©voilÃ©e !</p>
                    </div>
                `;
                return;
            }

            // SÃ©parer Catherine (ordre=1) des autres
            const catherine = candidatsData.find(c => c.ordre === 1);
            const autresCandidats = candidatsData.filter(c => c.ordre !== 1);
            
            // Diviser les autres candidats pour mettre Catherine au milieu
            const middleIndex = Math.floor(autresCandidats.length / 2);
            const firstHalf = autresCandidats.slice(0, middleIndex);
            const secondHalf = autresCandidats.slice(middleIndex);
            
            // Reconstituer l'ordre : premiÃ¨re moitiÃ© + Catherine + deuxiÃ¨me moitiÃ©
            const orderedCandidats = [...firstHalf, catherine, ...secondHalf].filter(Boolean);

            if (currentView === 'list') {
                // VUE LISTE
                grid.style.display = 'block';
                
                const rows = orderedCandidats.map((candidat, index) => {
                    const isCatherine = candidat.ordre === 1;
                    const style = isCatherine 
                        ? 'border-bottom: 1px solid #eee; background: #fffbeb; cursor: pointer;'
                        : 'border-bottom: 1px solid #eee; cursor: pointer;';
                    const photoStyle = isCatherine
                        ? 'width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 3px solid var(--or);'
                        : 'width: 40px; height: 40px; border-radius: 50%; object-fit: cover;';
                    const photoSize = isCatherine ? '60px' : '40px';
                    const nom = isCatherine ? `â­ ${candidat.nom}` : candidat.nom;
                    
                    return `
                        <tr style="${style}" onclick="openCandidatModal(${index})" onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='${isCatherine ? '#fffbeb' : 'white'}'">
                            <td style="padding: 0.5rem;">
                                ${candidat.photo 
                                    ? `<img src="${candidat.photo}" alt="${candidat.nom}" style="${photoStyle}">`
                                    : `<div style="width: ${photoSize}; height: ${photoSize}; border-radius: 50%; background: #e0e0e0; display: flex; align-items: center; justify-content: center;">ğŸ‘¤</div>`
                                }
                            </td>
                            <td style="padding: 0.5rem; font-weight: 600;">${nom}</td>
                            <td style="padding: 0.5rem; color: #666;">${candidat.role || candidat.delegation || 'â€”'}</td>
                        </tr>
                    `;
                }).join('');
                
                grid.innerHTML = `
                    <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <thead>
                            <tr style="background: var(--bleu-vizille); color: white;">
                                <th style="padding: 0.75rem; text-align: left;">Photo</th>
                                <th style="padding: 0.75rem; text-align: left;">Nom</th>
                                <th style="padding: 0.75rem; text-align: left;">Fonction</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${rows}
                        </tbody>
                    </table>
                `;
            } else {
                // VUE CARTES
                grid.style.display = 'block';
                
                const cards = orderedCandidats.map((candidat, index) => {
                    const isCatherine = candidat.ordre === 1;
                    const borderStyle = isCatherine ? 'border: 3px solid var(--or);' : '';
                    // Style spÃ©cial pour centrer Catherine
                    const centerStyle = isCatherine ? 'grid-column: 1 / -1; justify-self: center; max-width: 350px;' : '';
                    const nom = isCatherine ? `â­ ${candidat.nom}` : candidat.nom;
                    const photoHtml = candidat.photo
                        ? `<img src="${candidat.photo}" alt="${candidat.nom}" class="team-photo">`
                        : `<div style="width:100%;height:250px;display:flex;align-items:center;justify-content:center;background:#e0e0e0;font-size:4rem;">ğŸ‘¤</div>`;

                    return `
                        <div class="team-card" style="${borderStyle} ${centerStyle}" onclick="openCandidatModal(${index})" tabindex="0" role="button" aria-label="${candidat.nom}">
                            ${photoHtml}
                            <div class="team-info">
                                <h3 class="team-name">${nom}</h3>
                                ${candidat.role ? `<p class="team-role">${candidat.role}</p>` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
                
                grid.innerHTML = `<div class="team-grid">${cards}</div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', loadCandidats);

        // ===== MODAL CANDIDAT =====
        function openCandidatModal(index) {
            const candidat = candidatsData[index];
            if (!candidat) return;

            const modal = document.getElementById('candidat-modal');

            // Photo
            const photoContainer = document.getElementById('modal-photo-container');
            if (candidat.photo) {
                photoContainer.innerHTML = `<img src="${candidat.photo}" alt="${candidat.nom}" class="modal-photo">`;
            } else {
                photoContainer.innerHTML = `<div class="modal-photo-placeholder">ğŸ‘¤</div>`;
            }

            // Infos de base
            document.getElementById('modal-name').textContent = candidat.nom || 'Nom non renseignÃ©';
            document.getElementById('modal-role').textContent = candidat.role || '';

            // DÃ©lÃ©gation
            const delegationEl = document.getElementById('modal-delegation');
            if (candidat.delegation) {
                delegationEl.textContent = candidat.delegation;
                delegationEl.style.display = 'inline-block';
            } else {
                delegationEl.style.display = 'none';
            }

            // Bio / PrÃ©sentation
            document.getElementById('modal-bio').textContent = candidat.bio || 'Non renseignÃ©';

            // Parcours
            document.getElementById('modal-pedigree').textContent = candidat.pedigree || 'Non renseignÃ©';

            // Objectifs
            document.getElementById('modal-objectifs').textContent = candidat.objectifs || 'Non renseignÃ©';

            // Citation
            document.getElementById('modal-citation').textContent = candidat.citation || 'Non renseignÃ©';

            // RÃ©seaux sociaux
            const socialsEl = document.getElementById('modal-socials');
            let socialsHtml = '';
            if (candidat.email) socialsHtml += `<a href="mailto:${candidat.email}" title="Email">ğŸ“§</a>`;
            if (candidat.facebook) socialsHtml += `<a href="${candidat.facebook}" target="_blank" title="Facebook">ğŸ“˜</a>`;
            if (candidat.linkedin) socialsHtml += `<a href="${candidat.linkedin}" target="_blank" title="LinkedIn">ğŸ’¼</a>`;
            if (candidat.twitter) socialsHtml += `<a href="${candidat.twitter}" target="_blank" title="Twitter">ğŸ¦</a>`;

            if (socialsHtml) {
                socialsEl.innerHTML = socialsHtml;
                socialsEl.style.display = 'flex';
            } else {
                socialsEl.innerHTML = '<span style="color: #999; font-size: 0.9rem;">Aucun rÃ©seau social</span>';
                socialsEl.style.display = 'block';
            }

            // Afficher
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeCandidatModal() {
            document.getElementById('candidat-modal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Fermer avec Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeCandidatModal();
        });

        // Rendre accessible globalement
        window.openCandidatModal = openCandidatModal;
        window.closeCandidatModal = closeCandidatModal;
    </script>

    <!-- Modal Candidat -->
    <div class="modal-overlay" id="candidat-modal" role="dialog" aria-modal="true" aria-labelledby="modal-name" onclick="if(event.target === this) closeCandidatModal()">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" onclick="closeCandidatModal()" aria-label="Fermer la fenÃªtre">âœ•</button>
                <div id="modal-photo-container"></div>
                <h2 class="modal-name" id="modal-name"></h2>
                <p class="modal-role" id="modal-role"></p>
            </div>
            <div class="modal-body">
                <span class="modal-delegation" id="modal-delegation"></span>

                <div class="modal-section">
                    <h4 class="modal-section-title">ğŸ‘¤ PrÃ©sentation</h4>
                    <p class="modal-bio" id="modal-bio">Non renseignÃ©</p>
                </div>

                <div class="modal-section">
                    <h4 class="modal-section-title">ğŸ“ Parcours</h4>
                    <p class="modal-pedigree" id="modal-pedigree">Non renseignÃ©</p>
                </div>

                <div class="modal-section">
                    <h4 class="modal-section-title">ğŸ¯ Objectifs de campagne</h4>
                    <p class="modal-objectifs" id="modal-objectifs">Non renseignÃ©</p>
                </div>

                <div class="modal-section" id="modal-citation-section">
                    <h4 class="modal-section-title">ğŸ’¬ Citation</h4>
                    <p class="modal-citation" id="modal-citation">Non renseignÃ©</p>
                </div>

                <div class="modal-socials" id="modal-socials"></div>
            </div>
        </div>
    </div>

    <!-- Site Features JS -->
    <script src="js/site-features.js"></script>
</body>
</html>




