<!DOCTYPE html>
<html lang="fr">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'√âquipe ‚Äì Vizille en Mouvement</title>
    <meta name="description" content="D√©couvrez l'√©quipe de Vizille en Mouvement. Des femmes et des hommes engag√©s pour Vizille.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vizilleenmouvement.fr/equipe.html">
    <meta property="og:title" content="L'√âquipe - Vizille en Mouvement">
    <meta property="og:description" content="D√©couvrez l'√©quipe de Vizille en Mouvement. Des femmes et des hommes engag√©s.">
    <meta property="og:image" content="https://vizilleenmouvement.fr/images/logo.png">
    <meta property="og:locale" content="fr_FR">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="L'√âquipe - Vizille en Mouvement">
    <meta name="twitter:description" content="D√©couvrez l'√©quipe de Vizille en Mouvement.">
    <meta name="twitter:image" content="https://vizilleenmouvement.fr/images/logo.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Source+Sans+3:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/pages/equipe.css">
</head>
<body>
    <!-- Skip Link pour navigation clavier -->
    <a href="#main-content" class="skip-link">Aller au contenu principal</a>

    <header class="header">
        <div class="header-top">
            <p>L'√âquipe ‚Ä¢ Vizille en Mouvement</p>
        </div>

        <div class="header-main">
            <a href="index.html">
                <img src="images/logo.png" alt="Vizille en Mouvement" class="nav-header-logo">
            </a>
            <button class="menu-toggle" aria-label="Menu">‚ò∞</button>
            <nav>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="bilan.html">Bilan</a></li>
                    <li><a href="projet.html">Projet</a></li>
                    <li><a href="blog.html">Actualit√©s</a></li>
                    <li><a href="equipe.html" class="active">√âquipe</a></li>
                    <li><a href="faq.html">Construisons ensemble</a></li>
                    <li><a href="admin.html" class="admin-link" title="Administration">‚öôÔ∏è</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <script src="js/menu-mobile.js"></script>

    <section class="hero-unified">
        <img src="images/logo.png" alt="Vizille en Mouvement" class="hero-logo">
        <div class="hero-text">
            <h1>üë• L'√âquipe</h1>
            <p class="slogan">Ensemble pour une ville dynamique et solidaire</p>
            <p class="hero-subtitle">Notre liste rassemble des femmes et des hommes de tous horizons, unis par l'envie de servir Vizille et ses habitants.</p>
        </div>
    </section>

    <main class="content" id="main-content">

        <!-- TOGGLE UNIQUE -->
        <div style="display: flex; justify-content: flex-end; margin-bottom: 1.5rem;">
            <div class="view-toggle" style="display: flex; gap: 0.5rem;">
                <button class="view-btn active" data-view="cards" onclick="setView('cards')" style="padding: 0.5rem 1rem; border: 2px solid var(--bleu-vizille); background: var(--bleu-vizille); color: white; border-radius: 8px; cursor: pointer; font-weight: 600;">
                    üé¥ Cartes
                </button>
                <button class="view-btn" data-view="list" onclick="setView('list')" style="padding: 0.5rem 1rem; border: 2px solid var(--bleu-vizille); background: white; color: var(--bleu-vizille); border-radius: 8px; cursor: pointer; font-weight: 600;">
                    üìã Liste
                </button>
            </div>
        </div>

        <!-- T√äTE DE LISTE -->
        <h2 class="section-title">‚≠ê T√™te de liste</h2>
        <div id="leader-container"></div>

        <!-- LES COLISTIERS -->
        <h2 class="section-title" style="margin-top: 2rem;">Les colistiers</h2>
        <div id="team-grid"></div>
        
        <p id="click-hint" style="text-align: center; color: #666; font-style: italic; margin-top: 1rem; font-size: 0.9rem;">üëÜ Cliquez pour mieux conna√Ætre le candidat ou la candidate</p>

        <!-- CHARTE D'ENGAGEMENT -->
        <section class="values-section">
            <h2 class="section-title">üìú Notre Charte d'Engagement</h2>
            <div class="values-grid">
                <div class="value-item">
                    <div class="value-icon">üëÇ</div>
                    <h4>√âcoute Citoyenne</h4>
                    <p>Placer la parole des habitants au c≈ìur de la d√©cision</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">üå±</div>
                    <h4>D√©veloppement Durable</h4>
                    <p>Agir pour une transition √©cologique ambitieuse</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">ü§ù</div>
                    <h4>Respect Mutuel</h4>
                    <p>Instaurer la confiance avec le personnel municipal</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">‚öñÔ∏è</div>
                    <h4>√âgalit√© R√©elle</h4>
                    <p>Garantir l'√©galit√© femmes-hommes dans les responsabilit√©s</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">‚ù§Ô∏è</div>
                    <h4>Dignit√© et Tol√©rance</h4>
                    <p>Lutter contre toutes les discriminations</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">üèõÔ∏è</div>
                    <h4>La√Øcit√© & Neutralit√©</h4>
                    <p>Respecter les principes r√©publicains</p>
                </div>
            </div>
        </section>

        <!-- CONTRAT D'ACTION -->
        <section class="values-section contrat-section">
            <h2 class="section-title">‚úçÔ∏è Notre Contrat d'Action</h2>
            <div class="values-grid">
                <div class="value-item">
                    <div class="value-icon">üíù</div>
                    <h4>Altruisme</h4>
                    <p>Agir pour l'int√©r√™t g√©n√©ral avant tout</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">üìä</div>
                    <h4>Rigueur</h4>
                    <p>Gestion transparente et responsable des deniers publics</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">üó≥Ô∏è</div>
                    <h4>D√©mocratie</h4>
                    <p>Respect de l'opinion politique de chacun</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">üèóÔ∏è</div>
                    <h4>Participation</h4>
                    <p>Co-construction des projets avec les habitants</p>
                </div>
                <div class="value-item">
                    <div class="value-icon">‚ú®</div>
                    <h4>Exemplarit√©</h4>
                    <p>Refus des attaques personnelles, d√©bat d'id√©es</p>
                </div>
            </div>
        </section>

        <!-- REJOIGNEZ-NOUS -->
        <section class="join-section">
            <h2>ü§ù Rejoignez-nous</h2>
            <p>Vous souhaitez vous engager pour Vizille ?</p>
            <a href="faq.html" class="btn-contact">Nous contacter</a>
        </section>

    </main>

    <footer class="footer">
        <p class="footer-slogan">¬´ Ensemble pour une ville dynamique et solidaire ¬ª</p>
        <p>¬© 2025 Vizille en Mouvement</p>
    </footer>

    <script>
        let candidatsData = [];
        let currentView = 'cards';

        function setView(view) {
            currentView = view;
            document.querySelectorAll('.view-btn').forEach(btn => {
                if (btn.dataset.view === view) {
                    btn.style.background = 'var(--bleu-vizille)';
                    btn.style.color = 'white';
                    btn.classList.add('active');
                } else {
                    btn.style.background = 'white';
                    btn.style.color = 'var(--bleu-vizille)';
                    btn.classList.remove('active');
                }
            });
            renderLeader();
            renderTeam();
        }

        function renderLeader() {
            const container = document.getElementById('leader-container');
            if (currentView === 'list') {
                container.innerHTML = `
                    <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <thead>
                            <tr style="background: var(--bleu-vizille); color: white;">
                                <th style="padding: 0.75rem; text-align: left;">Photo</th>
                                <th style="padding: 0.75rem; text-align: left;">Nom</th>
                                <th style="padding: 0.75rem; text-align: left;">Fonction</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="border-bottom: 1px solid #eee; background: #fffbeb; cursor: pointer;" onclick="alert('Catherine Troton\\n\\nCandidate T√™te de Liste\\n\\nEngag√©e depuis plus de 20 ans pour Vizille. Porte les valeurs de solidarit√©, d\\'√©coute et de proximit√© au c≈ìur de son action municipale.')">
                                <td style="padding: 0.5rem;">
                                    <img src="images/catherine-troton.jpg" alt="Catherine Troton" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 3px solid var(--or);">
                                </td>
                                <td style="padding: 0.5rem; font-weight: 600;">‚≠ê Catherine Troton</td>
                                <td style="padding: 0.5rem; color: #666;">Candidate T√™te de Liste</td>
                            </tr>
                        </tbody>
                    </table>
                `;
            } else {
                container.innerHTML = `
                    <div class="team-grid">
                        <div class="team-card" style="border: 3px solid var(--or);" onclick="alert('Catherine Troton\\n\\nCandidate T√™te de Liste\\n\\nEngag√©e depuis plus de 20 ans pour Vizille. Porte les valeurs de solidarit√©, d\\'√©coute et de proximit√© au c≈ìur de son action municipale.')">
                            <img src="images/catherine-troton.jpg" alt="Catherine Troton" class="team-photo">
                            <div class="team-info">
                                <h3 class="team-name">‚≠ê Catherine Troton</h3>
                                <p class="team-role">Candidate T√™te de Liste</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        async function loadCandidats() {
            try {
                const response = await fetch('candidats.json?v=' + Date.now());
                if (!response.ok) throw new Error('Erreur');

                candidatsData = await response.json();

                // Filtrer les actifs, exclure la t√™te de liste, trier par ordre
                candidatsData = candidatsData
                    .filter(c => c.actif !== false)
                    .filter(c => !c.role?.toLowerCase().includes('t√™te de liste'))
                    .filter(c => c.ordre !== 1)
                    .sort((a, b) => (a.ordre || 99) - (b.ordre || 99));

                // Vider le leader-container car Catherine est maintenant dans team-grid
                document.getElementById('leader-container').innerHTML = '';
                
                // Catherine sera affich√©e au milieu dans renderTeam()
                renderTeam();
            } catch (err) {
                document.getElementById('team-grid').innerHTML = `
                    <div class="loading">
                        <span style="font-size: 2rem;">üë•</span>
                        <p>L'√©quipe sera bient√¥t d√©voil√©e !</p>
                    </div>
                `;
            }
        }

        function renderTeam() {
            const grid = document.getElementById('team-grid');

            if (candidatsData.length === 0) {
                grid.innerHTML = `
                    <div class="loading">
                        <span style="font-size: 2rem;">üë•</span>
                        <p>Les colistiers seront bient√¥t d√©voil√©s !</p>
                    </div>
                `;
                return;
            }

            if (currentView === 'list') {
                // VUE LISTE - Catherine au milieu
                grid.style.display = 'block';
                
                // Diviser les candidats pour mettre Catherine au milieu
                const middleIndex = Math.floor(candidatsData.length / 2);
                const firstHalf = candidatsData.slice(0, middleIndex);
                const secondHalf = candidatsData.slice(middleIndex);
                
                // G√©n√©rer les lignes pour la premi√®re moiti√©
                const firstHalfRows = firstHalf.map((candidat, index) => `
                    <tr style="border-bottom: 1px solid #eee; cursor: pointer;" onclick="openCandidatModal(${index})" onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='white'">
                        <td style="padding: 0.5rem;">
                            ${candidat.photo 
                                ? `<img src="${candidat.photo}" alt="${candidat.nom}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">`
                                : `<div style="width: 40px; height: 40px; border-radius: 50%; background: #e0e0e0; display: flex; align-items: center; justify-content: center;">üë§</div>`
                            }
                        </td>
                        <td style="padding: 0.5rem; font-weight: 600;">${candidat.nom}</td>
                        <td style="padding: 0.5rem; color: #666;">${candidat.role || candidat.delegation || '‚Äî'}</td>
                    </tr>
                `).join('');
                
                // Ligne de Catherine
                const catherineRow = `
                    <tr style="border-bottom: 1px solid #eee; background: #fffbeb; cursor: pointer;" onclick="alert('Catherine Troton\\n\\nCandidate T√™te de Liste\\n\\nEngag√©e depuis plus de 20 ans pour Vizille. Porte les valeurs de solidarit√©, d\\'√©coute et de proximit√© au c≈ìur de son action municipale.')">
                        <td style="padding: 0.5rem;">
                            <img src="images/catherine-troton.jpg" alt="Catherine Troton" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 3px solid var(--or);">
                        </td>
                        <td style="padding: 0.5rem; font-weight: 600;">‚≠ê Catherine Troton</td>
                        <td style="padding: 0.5rem; color: #666;">Candidate T√™te de Liste</td>
                    </tr>
                `;
                
                // G√©n√©rer les lignes pour la seconde moiti√©
                const secondHalfRows = secondHalf.map((candidat, index) => {
                    const actualIndex = middleIndex + index;
                    return `
                        <tr style="border-bottom: 1px solid #eee; cursor: pointer;" onclick="openCandidatModal(${actualIndex})" onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='white'">
                            <td style="padding: 0.5rem;">
                                ${candidat.photo 
                                    ? `<img src="${candidat.photo}" alt="${candidat.nom}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">`
                                    : `<div style="width: 40px; height: 40px; border-radius: 50%; background: #e0e0e0; display: flex; align-items: center; justify-content: center;">üë§</div>`
                                }
                            </td>
                            <td style="padding: 0.5rem; font-weight: 600;">${candidat.nom}</td>
                            <td style="padding: 0.5rem; color: #666;">${candidat.role || candidat.delegation || '‚Äî'}</td>
                        </tr>
                    `;
                }).join('');
                
                grid.innerHTML = `
                    <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <thead>
                            <tr style="background: var(--bleu-vizille); color: white;">
                                <th style="padding: 0.75rem; text-align: left;">Photo</th>
                                <th style="padding: 0.75rem; text-align: left;">Nom</th>
                                <th style="padding: 0.75rem; text-align: left;">Fonction</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${firstHalfRows}
                            ${catherineRow}
                            ${secondHalfRows}
                        </tbody>
                    </table>
                `;
            } else {
                // VUE CARTES - Catherine au milieu
                grid.style.display = 'block';
                
                // Diviser les candidats en deux parties pour mettre Catherine au milieu
                const middleIndex = Math.floor(candidatsData.length / 2);
                const firstHalf = candidatsData.slice(0, middleIndex);
                const secondHalf = candidatsData.slice(middleIndex);
                
                // G√©n√©rer les cartes pour la premi√®re moiti√©
                const firstHalfHTML = firstHalf.map((candidat, index) => {
                    const photoHtml = candidat.photo
                        ? `<img src="${candidat.photo}" alt="${candidat.nom}" class="team-photo">`
                        : `<div style="width:100%;height:250px;display:flex;align-items:center;justify-content:center;background:#e0e0e0;font-size:4rem;">üë§</div>`;

                    return `
                        <div class="team-card" onclick="openCandidatModal(${index})" tabindex="0" role="button" aria-label="${candidat.nom}">
                            ${photoHtml}
                            <div class="team-info">
                                <h3 class="team-name">${candidat.nom}</h3>
                                ${candidat.role ? `<p class="team-role">${candidat.role}</p>` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
                
                // Carte de Catherine
                const catherineHTML = `
                    <div class="team-card" style="border: 3px solid var(--or);" onclick="alert('Catherine Troton\\n\\nCandidate T√™te de Liste\\n\\nEngag√©e depuis plus de 20 ans pour Vizille. Porte les valeurs de solidarit√©, d\\'√©coute et de proximit√© au c≈ìur de son action municipale.')">
                        <img src="images/catherine-troton.jpg" alt="Catherine Troton" class="team-photo">
                        <div class="team-info">
                            <h3 class="team-name">‚≠ê Catherine Troton</h3>
                            <p class="team-role">Candidate T√™te de Liste</p>
                        </div>
                    </div>
                `;
                
                // G√©n√©rer les cartes pour la seconde moiti√©
                const secondHalfHTML = secondHalf.map((candidat, index) => {
                    const actualIndex = middleIndex + index;
                    const photoHtml = candidat.photo
                        ? `<img src="${candidat.photo}" alt="${candidat.nom}" class="team-photo">`
                        : `<div style="width:100%;height:250px;display:flex;align-items:center;justify-content:center;background:#e0e0e0;font-size:4rem;">üë§</div>`;

                    return `
                        <div class="team-card" onclick="openCandidatModal(${actualIndex})" tabindex="0" role="button" aria-label="${candidat.nom}">
                            ${photoHtml}
                            <div class="team-info">
                                <h3 class="team-name">${candidat.nom}</h3>
                                ${candidat.role ? `<p class="team-role">${candidat.role}</p>` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
                
                // Assembler tout dans une div avec la classe team-grid
                grid.innerHTML = `<div class="team-grid">${firstHalfHTML}${catherineHTML}${secondHalfHTML}</div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', loadCandidats);

        // ===== MODAL CANDIDAT =====
        function openCandidatModal(index) {
            const candidat = candidatsData[index];
            if (!candidat) return;

            const modal = document.getElementById('candidat-modal');

            // Photo
            const photoContainer = document.getElementById('modal-photo-container');
            if (candidat.photo) {
                photoContainer.innerHTML = `<img src="${candidat.photo}" alt="${candidat.nom}" class="modal-photo">`;
            } else {
                photoContainer.innerHTML = `<div class="modal-photo-placeholder">üë§</div>`;
            }

            // Infos de base
            document.getElementById('modal-name').textContent = candidat.nom || 'Nom non renseign√©';
            document.getElementById('modal-role').textContent = candidat.role || '';

            // D√©l√©gation
            const delegationEl = document.getElementById('modal-delegation');
            if (candidat.delegation) {
                delegationEl.textContent = candidat.delegation;
                delegationEl.style.display = 'inline-block';
            } else {
                delegationEl.style.display = 'none';
            }

            // Bio / Pr√©sentation
            document.getElementById('modal-bio').textContent = candidat.bio || 'Non renseign√©';

            // Parcours
            document.getElementById('modal-pedigree').textContent = candidat.pedigree || 'Non renseign√©';

            // Objectifs
            document.getElementById('modal-objectifs').textContent = candidat.objectifs || 'Non renseign√©';

            // Citation
            document.getElementById('modal-citation').textContent = candidat.citation || 'Non renseign√©';

            // R√©seaux sociaux
            const socialsEl = document.getElementById('modal-socials');
            let socialsHtml = '';
            if (candidat.email) socialsHtml += `<a href="mailto:${candidat.email}" title="Email">üìß</a>`;
            if (candidat.facebook) socialsHtml += `<a href="${candidat.facebook}" target="_blank" title="Facebook">üìò</a>`;
            if (candidat.linkedin) socialsHtml += `<a href="${candidat.linkedin}" target="_blank" title="LinkedIn">üíº</a>`;
            if (candidat.twitter) socialsHtml += `<a href="${candidat.twitter}" target="_blank" title="Twitter">üê¶</a>`;

            if (socialsHtml) {
                socialsEl.innerHTML = socialsHtml;
                socialsEl.style.display = 'flex';
            } else {
                socialsEl.innerHTML = '<span style="color: #999; font-size: 0.9rem;">Aucun r√©seau social</span>';
                socialsEl.style.display = 'block';
            }

            // Afficher
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeCandidatModal() {
            document.getElementById('candidat-modal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Fermer avec Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeCandidatModal();
        });

        // Rendre accessible globalement
        window.openCandidatModal = openCandidatModal;
        window.closeCandidatModal = closeCandidatModal;
    </script>

    <!-- Modal Candidat -->
    <div class="modal-overlay" id="candidat-modal" role="dialog" aria-modal="true" aria-labelledby="modal-name" onclick="if(event.target === this) closeCandidatModal()">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" onclick="closeCandidatModal()" aria-label="Fermer la fen√™tre">‚úï</button>
                <div id="modal-photo-container"></div>
                <h2 class="modal-name" id="modal-name"></h2>
                <p class="modal-role" id="modal-role"></p>
            </div>
            <div class="modal-body">
                <span class="modal-delegation" id="modal-delegation"></span>

                <div class="modal-section">
                    <h4 class="modal-section-title">üë§ Pr√©sentation</h4>
                    <p class="modal-bio" id="modal-bio">Non renseign√©</p>
                </div>

                <div class="modal-section">
                    <h4 class="modal-section-title">üéì Parcours</h4>
                    <p class="modal-pedigree" id="modal-pedigree">Non renseign√©</p>
                </div>

                <div class="modal-section">
                    <h4 class="modal-section-title">üéØ Objectifs de campagne</h4>
                    <p class="modal-objectifs" id="modal-objectifs">Non renseign√©</p>
                </div>

                <div class="modal-section" id="modal-citation-section">
                    <h4 class="modal-section-title">üí¨ Citation</h4>
                    <p class="modal-citation" id="modal-citation">Non renseign√©</p>
                </div>

                <div class="modal-socials" id="modal-socials"></div>
            </div>
        </div>
    </div>

    <!-- Site Features JS -->
    <script src="js/site-features.js"></script>
</body>
</html>


