<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notre Projet 2026-2032 ‚Äì Vizille en Mouvement</title>
    <meta name="description" content="D√©couvrez nos engagements pour le mandat 2026-2032. Un projet ambitieux pour l'avenir de Vizille.">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vizilleenmouvement.fr/projet.html">
    <meta property="og:title" content="Notre Projet 2026-2032 - Vizille en Mouvement">
    <meta property="og:description" content="D√©couvrez nos engagements pour le mandat 2026-2032.">
    <meta property="og:image" content="https://vizilleenmouvement.fr/images/logo.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Source+Sans+3:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    
    <style>
        body { padding-top: 110px; }
        
        /* Hero style bilan */
        .projet-hero {
            background: linear-gradient(135deg, var(--bleu-vizille), var(--bleu-clair));
            color: white;
            padding: 2rem 1rem;
            text-align: center;
        }
        .projet-hero .logo-pulse {
            width: 120px;
            height: auto;
            margin-bottom: 1rem;
            animation: pulse 2s ease-in-out infinite;
            filter: drop-shadow(0 4px 12px rgba(201, 162, 39, 0.5));
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); filter: drop-shadow(0 8px 24px rgba(201, 162, 39, 0.8)); }
        }
        .projet-hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin: 0 0 0.5rem 0;
        }
        .projet-hero .slogan {
            color: var(--or-clair);
            font-size: 1.1rem;
            margin: 0;
        }
        .projet-hero .stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        .projet-hero .stat { text-align: center; }
        .projet-hero .stat-val { font-size: 2.5rem; font-weight: 700; color: var(--or-clair); }
        .projet-hero .stat-label { font-size: 0.9rem; opacity: 0.9; }
        
        /* Onglets color√©s */
        .tabs-container {
            background: white;
            border-bottom: 2px solid var(--gris-doux);
            position: sticky;
            top: 110px;
            z-index: 100;
        }
        .tabs {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            overflow-x: auto;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            padding: 0.8rem 1rem;
        }
        .tab {
            padding: 0.7rem 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            white-space: nowrap;
            font-weight: 600;
            color: white;
            font-size: 0.95rem;
            transition: all 0.2s;
            border-radius: 8px;
            border: 2px solid transparent;
            opacity: 0.85;
        }
        .tab:hover { opacity: 1; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .tab.active { opacity: 1; transform: scale(1.05); box-shadow: 0 6px 20px rgba(0,0,0,0.2); border-color: rgba(255,255,255,0.5); }
        .tab .badge { background: rgba(255,255,255,0.3); padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; font-weight: 700; }
        
        /* Bandeau th√®me */
        .theme-banner-container { max-width: 1400px; margin: 0 auto; padding: 1rem 1rem 0; }
        .theme-banner {
            padding: 1rem 1.5rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: white;
        }
        .theme-banner .icon { font-size: 2.5rem; }
        .theme-banner .text h2 { font-family: 'Playfair Display', serif; font-size: 1.5rem; margin: 0 0 0.3rem 0; }
        .theme-banner .text p { opacity: 0.9; font-size: 0.95rem; margin: 0; }
        
        /* Grille de cartes */
        .cards-container { max-width: 1400px; margin: 1.5rem auto; padding: 0 1rem 2rem; }
        .cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1.5rem; }
        
        /* Carte */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }
        .card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(0,0,0,0.15); }
        .card-header { padding: 1rem 1.2rem; color: white; }
        .card-header h3 { font-size: 1rem; line-height: 1.4; margin: 0; }
        .card-body { padding: 1rem 1.2rem; }
        .card-body p { font-size: 0.9rem; color: var(--gris-texte); line-height: 1.5; margin: 0; }
        .card-body .meta { margin-top: 0.8rem; padding-top: 0.8rem; border-top: 1px solid var(--gris-doux); font-size: 0.8rem; }
        .card-body .meta span { display: inline-block; background: var(--gris-doux); padding: 0.2rem 0.5rem; border-radius: 4px; margin: 0.2rem 0.2rem 0 0; }
        .card.objectif .card-header { background: linear-gradient(135deg, #6c3483, #8e44ad); }
        .card.objectif { border-left: 4px solid #8e44ad; }
        .card.engagement .card-header { background: linear-gradient(135deg, #1e8449, #27ae60); }
        .card.engagement { border-left: 4px solid #27ae60; }
        
        /* Compteur */
        .results-count { text-align: center; padding: 0.5rem 1rem; color: var(--gris-texte); font-size: 0.9rem; }
        
        /* Bandeau Concertation */
        .leitmotiv-banner { display: none; background: linear-gradient(135deg, #16a085, #0e6655); color: white; padding: 1.2rem 2rem; text-align: center; }
        .leitmotiv-banner.visible { display: block; }
        .leitmotiv-banner h2 { margin: 0 0 0.3rem 0; font-size: 1.1rem; font-weight: 700; }
        .leitmotiv-banner p { margin: 0; opacity: 0.9; font-size: 0.9rem; }
        
        /* Sous-onglets Concertation */
        .subtabs-container { display: none; background: var(--blanc-casse); padding: 1rem 0; border-bottom: 1px solid var(--gris-doux); }
        .subtabs-container.visible { display: block; }
        .subtabs { max-width: 1400px; margin: 0 auto; display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap; padding: 0 1rem; }
        .subtab { padding: 0.5rem 1rem; cursor: pointer; border-radius: 20px; font-size: 0.85rem; background: white; color: var(--gris-texte); transition: all 0.2s; border: 2px solid transparent; }
        .subtab:hover { border-color: #16a085; }
        .subtab.active { background: #16a085; color: white; }
        
        /* Contenu axe */
        .axe-content { max-width: 900px; margin: 2rem auto; padding: 0 1rem; }
        .axe-objectif { background: linear-gradient(135deg, #5d6d7e, #4a5568); color: white; padding: 1.5rem 2rem; border-radius: 12px; margin-bottom: 1.5rem; }
        .axe-objectif h3 { margin: 0 0 0.5rem 0; font-size: 1.3rem; }
        .axe-objectif p { margin: 0; font-size: 1rem; opacity: 0.95; }
        .axe-engagements h4 { color: #27ae60; font-size: 1.1rem; margin: 0 0 1rem 0; }
        .engagement-item { background: white; border-left: 4px solid #27ae60; padding: 1rem 1.5rem; margin-bottom: 1rem; border-radius: 0 8px 8px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .engagement-item h5 { margin: 0 0 0.3rem 0; color: var(--bleu-vizille); font-size: 1rem; }
        .engagement-item p { margin: 0; color: var(--gris-texte); line-height: 1.5; font-size: 0.95rem; }
        
        @media (max-width: 768px) {
            body { padding-top: 80px; }
            .tabs-container { top: 80px; }
            .projet-hero .logo-pulse { width: 80px; }
            .projet-hero h1 { font-size: 1.5rem; }
            .projet-hero .stat-val { font-size: 2rem; }
            .cards-grid { grid-template-columns: 1fr; }
            .tab { font-size: 0.85rem; padding: 0.5rem 0.8rem; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-top"><p>Vizille en Mouvement - Municipales 2026</p></div>
        <div class="header-main">
            <a href="index.html"><img src="images/logo.png" alt="Vizille en Mouvement" class="nav-header-logo"></a>
            <button class="menu-toggle" aria-label="Menu">‚ò∞</button>
            <nav>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="bilan.html">Bilan</a></li>
                    <li><a href="projet.html" class="active">Projet</a></li>
                    <li><a href="blog.html">Actualit√©s</a></li>
                    <li><a href="equipe.html">Equipe</a></li>
                    <li><a href="faq.html">Construisons ensemble</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <script src="js/menu-mobile.js"></script>

    <section class="projet-hero">
        <img src="images/logo.png" alt="Vizille en Mouvement" class="logo-pulse">
        <h1>Projet 2026-2032</h1>
        <p class="slogan">Nos engagements pour Vizille</p>
        <div class="stats" id="hero-stats"></div>
    </section>
    
    <div class="tabs-container"><div class="tabs" id="tabs"></div></div>
    
    <div class="leitmotiv-banner" id="leitmotiv-banner">
        <h2>üó£Ô∏è ANCRER LE PROGRAMME MUNICIPAL SUR LA BASE DE L'√âDUCATION POPULAIRE</h2>
        <p>‚Üí Renforcer la d√©mocratie ‚Ä¢ L'√©mancipation individuelle et collective ‚Ä¢ La concertation citoyenne</p>
    </div>
    <div class="subtabs-container" id="subtabs-container"><div class="subtabs" id="subtabs"></div></div>
    
    <div class="theme-banner-container" id="theme-banner-container"></div>
    <div class="results-count" id="results-count"></div>
    <div class="cards-container"><div class="cards-grid" id="cards-grid"></div></div>
    <div id="axe-content-container"></div>


<script>
let allData = [];
let themeConfig = {};
let currentTheme = null;
let currentAxe = 'Axe 1';

// Les 5 axes de Concertation citoyenne
const AXES = [
    { 
        id: 'Axe 1', label: '1Ô∏è‚É£ D√©mocratie locale',
        titre: 'D√©mocratie locale et concertation citoyenne',
        objectif: 'Faire vivre une d√©mocratie active, inclusive et √©mancipatrice',
        engagements: [
            { titre: 'Conseils de quartier', desc: 'Cr√©er des conseils de quartier pour associer les habitants aux d√©cisions locales.' },
            { titre: 'Lieu d\'√©coute et de concertation', desc: 'Ouvrir un lieu d√©di√© √† l\'√©coute, aux ateliers participatifs, aux d√©bats citoyens et aux formations.' }
        ]
    },
    { 
        id: 'Axe 2', label: '2Ô∏è‚É£ √âducation populaire',
        titre: '√âducation populaire et culture pour tous',
        objectif: 'Garantir l\'acc√®s √† une culture critique, √©mancipatrice et accessible √† tous',
        engagements: [
            { titre: 'Centre d\'√©ducation populaire', desc: 'Cr√©er un centre permanent (style MJC) pour ateliers, formations et rencontres.' },
            { titre: 'Caf√©-d√©bats et cin√©-d√©bats', desc: 'Organiser r√©guli√®rement des d√©bats sur les enjeux sociaux, environnementaux et politiques.' },
            { titre: 'Soutien aux associations', desc: 'Renforcer le soutien aux associations d\'√©ducation populaire (L\'Escale...).' },
            { titre: 'R√©sidences d\'artistes', desc: 'Accueillir des r√©sidences d\'artistes et chercheurs dans les √©coles et quartiers.' }
        ]
    },
    { 
        id: 'Axe 3', label: '3Ô∏è‚É£ Jeunesse',
        titre: 'Jeunesse et √©mancipation',
        objectif: 'Donner aux jeunes les moyens de devenir acteurs de leur vie et territoire',
        engagements: [
            { titre: 'Conseil Municipal des Jeunes', desc: 'Cr√©er un CMJ pour impliquer les jeunes dans la vie de la commune.' },
            { titre: 'Ateliers pens√©e critique', desc: 'Proposer des ateliers d\'autod√©fense intellectuelle et de pens√©e critique.' },
            { titre: 'Chantiers jeunes participatifs', desc: 'Mettre en place des chantiers jeunes (service civique local).' }
        ]
    },
    { 
        id: 'Axe 4', label: '4Ô∏è‚É£ Lutte in√©galit√©s',
        titre: 'Lutte contre les in√©galit√©s et √©mancipation sociale',
        objectif: 'L\'√©ducation populaire comme outil d\'√©mancipation pour les plus √©loign√©s des droits',
        engagements: [
            { titre: 'Apprentissage du fran√ßais', desc: 'Soutenir l\'apprentissage du fran√ßais pour tous.' },
            { titre: 'Ateliers droits et institutions', desc: 'Comprendre ses droits, les aides sociales et le fonctionnement des institutions.' },
            { titre: 'Lieux de convivialit√© gratuits', desc: 'D√©velopper des lieux gratuits : jardins partag√©s, m√©diath√®que, L\'Escale...' },
            { titre: 'Conseil Local de Sant√© Mentale', desc: 'Cr√©er un CLSM comme outil de d√©mocratie en sant√©.' }
        ]
    },
    { 
        id: 'Axe 5', label: '5Ô∏è‚É£ Transition',
        titre: 'Transition √©cologique et savoirs partag√©s',
        objectif: 'Faire de la transition un projet collectif compris et ma√Ætris√© localement',
        engagements: [
            { titre: 'Actions p√©dagogiques Plan Climat', desc: 'Approfondir les actions p√©dagogiques du Plan Climat municipal.' },
            { titre: 'Formations citoyennes climat', desc: 'Organiser des formations sur les enjeux climatiques.' },
            { titre: 'Exp√©rimentations collectives', desc: 'Potagers urbains, compostage, r√©duction des d√©chets...' },
            { titre: 'Projets dans les √©coles', desc: 'Projets p√©dagogiques sur l\'environnement.' },
            { titre: 'Caf√©-d√©bats sant√©-environnement', desc: 'D√©bats sur pollution, habitat, risques professionnels.' }
        ]
    }
];

// Descriptions des th√®mes
const THEME_DESC = {
    'Transition √©cologique': '2 objectifs et 9 engagements pour l\'environnement et le climat',
    'Enfance/Jeunesse': 'Accompagner les enfants et les jeunes de Vizille',
    'Mobilit√©s': 'Faciliter les d√©placements de tous',
    'Tranquillit√© publique': 'Assurer la s√©curit√© et la tranquillit√© des Vizillois',
    'Urbanisme': 'Revitaliser le centre-ville et accompagner les projets urbains',
    'Travaux': 'Moderniser les infrastructures et le patrimoine communal',
    'Sant√©': 'Favoriser l\'acc√®s aux soins pour tous',
    'M√©tropole': 'Renforcer notre place dans la M√©tropole',
    'Concertation citoyenne': '5 axes pour ancrer le programme sur la base de l\'√©ducation populaire'
};

async function init() {
    // Charger themes.json
    try {
        const resp = await fetch('themes.json?v=' + Date.now());
        if (resp.ok) {
            const themes = await resp.json();
            themes.forEach(t => { themeConfig[t.theme] = { icon: t.icon, color: t.color }; });
        }
    } catch (e) { console.warn('Th√®mes par d√©faut'); }
    
    // Charger projets.json
    const response = await fetch('projets.json?v=' + Date.now());
    allData = await response.json();
    allData = allData.filter(p => p.statut !== 'En veille');
    
    // Stats hero
    const total = allData.length;
    const themesCount = new Set(allData.map(p => p.theme)).size;
    document.getElementById('hero-stats').innerHTML = `
        <div class="stat"><div class="stat-val">${total}</div><div class="stat-label">Engagements</div></div>
        <div class="stat"><div class="stat-val">${themesCount}</div><div class="stat-label">Th√©matiques</div></div>
    `;
    
    // Premier th√®me par d√©faut
    const orderedThemes = Object.keys(themeConfig);
    currentTheme = orderedThemes.find(t => allData.some(p => p.theme === t)) || allData[0]?.theme;
    
    renderTabs();
    render();
}

function renderTabs() {
    let html = '';
    const orderedThemes = Object.keys(themeConfig);
    
    orderedThemes.forEach(theme => {
        const count = allData.filter(p => p.theme === theme).length;
        if (count === 0 && theme !== 'Concertation citoyenne') return;
        
        const config = themeConfig[theme] || { icon: 'üìã', color: '#1a3a5c' };
        const isActive = theme === currentTheme;
        const badge = theme === 'Concertation citoyenne' ? '5 axes' : count;
        const darkColor = adjustColor(config.color, -30);
        
        html += `<div class="tab ${isActive ? 'active' : ''}" data-theme="${theme}" 
                      style="background: linear-gradient(135deg, ${darkColor}, ${config.color});"
                      onclick="selectTheme('${theme}')">
            ${config.icon} ${theme} <span class="badge">${badge}</span>
        </div>`;
    });
    
    document.getElementById('tabs').innerHTML = html;
}

function adjustColor(hex, amount) {
    const num = parseInt(hex.replace('#', ''), 16);
    const r = Math.max(0, Math.min(255, (num >> 16) + amount));
    const g = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amount));
    const b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount));
    return '#' + (0x1000000 + r * 0x10000 + g * 0x100 + b).toString(16).slice(1);
}

function render() {
    if (currentTheme === 'Concertation citoyenne') {
        document.getElementById('leitmotiv-banner').classList.add('visible');
        document.getElementById('subtabs-container').classList.add('visible');
        document.getElementById('theme-banner-container').innerHTML = '';
        document.getElementById('results-count').innerHTML = '';
        document.getElementById('cards-grid').innerHTML = '';
        renderSubtabs();
        renderAxeContent();
    } else {
        document.getElementById('leitmotiv-banner').classList.remove('visible');
        document.getElementById('subtabs-container').classList.remove('visible');
        document.getElementById('axe-content-container').innerHTML = '';
        renderThemeBanner();
        renderCards();
    }
}

function renderSubtabs() {
    let html = '';
    AXES.forEach(axe => {
        html += `<div class="subtab ${currentAxe === axe.id ? 'active' : ''}" onclick="selectAxe('${axe.id}')">${axe.label}</div>`;
    });
    document.getElementById('subtabs').innerHTML = html;
}

function renderAxeContent() {
    const axe = AXES.find(a => a.id === currentAxe);
    if (!axe) return;
    
    let html = `<div class="axe-content">
        <div class="axe-objectif">
            <h3>üéØ ${axe.titre}</h3>
            <p>${axe.objectif}</p>
        </div>
        <div class="axe-engagements">
            <h4>üå± Nos engagements (${axe.engagements.length})</h4>`;
    
    axe.engagements.forEach(eng => {
        html += `<div class="engagement-item"><h5>${eng.titre}</h5><p>${eng.desc}</p></div>`;
    });
    
    html += `</div></div>`;
    document.getElementById('axe-content-container').innerHTML = html;
}

function renderThemeBanner() {
    const config = themeConfig[currentTheme] || { icon: 'üìã', color: '#1a3a5c' };
    const desc = THEME_DESC[currentTheme] || '';
    const darkColor = adjustColor(config.color, -30);
    
    document.getElementById('theme-banner-container').innerHTML = `
        <div class="theme-banner" style="background: linear-gradient(135deg, ${darkColor}, ${config.color});">
            <div class="icon">${config.icon}</div>
            <div class="text"><h2>${currentTheme}</h2><p>${desc}</p></div>
        </div>
    `;
}

function renderCards() {
    let filtered = allData.filter(p => p.theme === currentTheme);
    filtered.sort((a, b) => {
        const order = { 'objectif': 0, 'engagement': 1 };
        return (order[a.type] ?? 2) - (order[b.type] ?? 2) || (a.id - b.id);
    });
    
    const objCount = filtered.filter(p => p.type === 'objectif').length;
    const engCount = filtered.filter(p => p.type === 'engagement').length;
    let countText = objCount && engCount ? `${objCount} objectif${objCount > 1 ? 's' : ''} et ${engCount} engagement${engCount > 1 ? 's' : ''}` :
                    objCount ? `${objCount} objectif${objCount > 1 ? 's' : ''}` :
                    engCount ? `${engCount} engagement${engCount > 1 ? 's' : ''}` : `${filtered.length} projet(s)`;
    
    document.getElementById('results-count').textContent = countText;
    
    let html = '';
    filtered.forEach(p => {
        const cardClass = p.type === 'objectif' ? 'objectif' : (p.type === 'engagement' ? 'engagement' : '');
        const icon = p.type === 'objectif' ? 'üéØ' : (p.type === 'engagement' ? 'üå±' : 'üìã');
        
        let metaHtml = '';
        if (p.echeance || p.partenaires || p.financement) {
            metaHtml = '<div class="meta">';
            if (p.echeance) metaHtml += `<span>üìÖ ${p.echeance}</span>`;
            if (p.partenaires) metaHtml += `<span>ü§ù ${p.partenaires.substring(0, 50)}${p.partenaires.length > 50 ? '...' : ''}</span>`;
            if (p.financement) metaHtml += `<span>üí∞ ${p.financement.substring(0, 40)}${p.financement.length > 40 ? '...' : ''}</span>`;
            metaHtml += '</div>';
        }
        
        html += `<div class="card ${cardClass}">
            <div class="card-header"><h3>${icon} ${p.titre}</h3></div>
            <div class="card-body">
                <p>${(p.description || p.resume || '').slice(0, 200)}${(p.description || '').length > 200 ? '...' : ''}</p>
                ${metaHtml}
            </div>
        </div>`;
    });
    
    document.getElementById('cards-grid').innerHTML = html;
}

function selectTheme(theme) {
    currentTheme = theme;
    currentAxe = 'Axe 1';
    renderTabs();
    render();
}

function selectAxe(axe) {
    currentAxe = axe;
    renderSubtabs();
    renderAxeContent();
}

init();
</script>
</body>
</html>
